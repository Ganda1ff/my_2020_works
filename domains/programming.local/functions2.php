<!DOCTYPE HTML PUBLIC  "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
 <head>
 <style>

._5-3g ._156o, ._156o:hover {
    cursor:pointer;
    background-color: 
    #000;
}
._156o {
    margin-left:40px;
    width:150px;
    position:absolute;
    margin-top:50px;
    background-color: #000;
    background-color: rgba(0, 0, 0, .6);
    transition: background-color .13s ease-out;
}
._1o59 {
    border-bottom-left-radius: 100px;
    border-bottom-right-radius: 100px;
    height: 80px;
    text-align: center;
}

._6-d #fbProfileCover .fbTimelineProfilePicSelector {
    text-align: center;
}
#contentArea {
    word-wrap: break-word;
}

._156n a {
    padding:0 0 10px 0;
    text-decoration: none;
    margin-top:10px;
    color: 
    #fff;
}
._1o5e {
    text-align: center;
}
._156p {
    font-weight: 700;
}
a {
    margin-top:20px;
    color: #385898;
    cursor: pointer;
}

body, button, input, label, select, td, textarea {
    font-family: Helvetica, Arial, sans-serif;
    font-size: 12px;
}
body {
    color: #1c1e21;
    direction: ltr;
    line-height: 1.34;
}
.img {
    border-radius: 100%;
    margin-top:-50px;
    margin-left:30px;
}
._1nv3 ._11kf {
    background-color: 
    #fff;
    border-radius: 2px;
    display: block;
    height: 160px;
    position: relative;
    width: 160px;
}
._1nv5 ._11kf {
    border: 4px solid 
    #fff;
}
._5ycb .openToggler ._1din, ._5ycb:hover ._23fw ._1din, ._5ycb ._156n:hover ._1din, ._5ycb ._156n:focus ._1din, ._5-3g ._1din {
    bottom: 60%;
    opacity: .9;
    transform: scale(.75);
}
._156n ._1o6f {
    position: static;
}
.sp_1VARE8V9eMY.sx_e28b9e {
    width: 26px;
    height: 21px;
    background-position: -35px 0;
}
i.img {
    -ms-high-contrast-adjust: none;
}
._1din {
    transition: all .3s cubic-bezier(.175, .885, .32, 1.275);
}
._1din {
    left: 5px;
    margin-bottom: -15px;
}
._1din, ._3qpg, ._daf {
    opacity: .7;
}
._156q {
    bottom: 50%;
    left: 11px;
    margin-bottom: -10px;
    position: absolute;
}
.sp_1VARE8V9eMY {
    background-image: url(/rsrc.php/v3/yi/r/kpwyE0rg_2K.png);
    background-size: auto;
    background-repeat: no-repeat;
    display: inline-block;
    height: 16px;
    width: 16px;
}

.button {
    cursor:pointer;
border-radius:50%;
border:10px solid white;
width:150px;
height:150px;
padding-left : 100px;
padding-top : 10px;
padding-bottom : 10px;
font-size:20px;
padding:0 0px 0 0;
margin-top:-30px;
}

.button:focus {
outline: 0;
outline-offset: 0;
}

.add {
font-size:30px;
margin-top:-20px;
color:white;
position: static;
-webkit-transition: width 0.6s ease-in-out;
    transition: width 0.6s ease-in-out;
}

.head {
    width:100%;
    height:150px;
    border:1px solid black;

    border-radius:5px;
}
 </style>
  <title></title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
 </head>
 <body>
 <!--<img class="img" alt="your profile photo" src="https://scontent-frx5-1.xx.fbcdn.net/v/t1.30497-1/c47.0.160.160a/p160x160/84241059_189132118950875_4138507100605120512_n.jpg?_nc_cat=1&amp;_nc_sid=dbb9e7&amp;_nc_oc=AQkKReV6ntVjODVBfrcn6wjKXh4SrOTbISPLooH-D8qQP1-x56qjzlEsia-OZ3XjCao&amp;_nc_ht=scontent-frx5-1.xx&amp;oh=39a2308cd137f38c846471ed0f258884&amp;oe=5E94BB5C">
 <div class="_156n _156o _1o59" data-ft="{&quot;tn&quot;:&quot;+B&quot;}"><a href="#" class="_156p _1o5e" ajaxify="/profile/picture/menu_dialog/?context_id=u_jsonp_8_6&amp;profile_id=100043915361833" rel="dialog" role="button" id="u_jsonp_8_a"><div class="_3-95"><i class="_1din _156q _1o6f img sp_1VARE8V9eMY sx_e28b9e"></i></div>Add Photo</a></div>
 <i class="_1din _156q _1o6f img sp_1VARE8V9eMY sx_e28b9e"></i>
-->

 <h1></h1>
 <div class="head"></div>
 <form method="post" enctype="multipart/form-data">
 <div class="_156n _156o _1o59" data-ft="{&quot;tn&quot;:&quot;+B&quot;}"><a href="#" class="_156p _1o5e" ajaxify="/profile/picture/menu_dialog/?context_id=u_jsonp_8_6&amp;profile_id=100043915361833" rel="dialog" role="button" id="u_jsonp_8_a"><div class="_3-95"><i class="_1din _156q _1o6f img sp_1VARE8V9eMY sx_e28b9e"></i></div><div class="add">üì∑</div>–î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ</a></div>
 <div class="img">
 <input  class="button" type="image" value="–ó–∞–≥—Ä—É–∑–∏—Ç—å" src="https://stavik.ru/sites/default/files/styles/personal/public/personal_photo/default_man_photo.jpg"></div>
 <input type="file" name="picture">
 <br>
 <label>–¢–∏–ø –∑–∞–≥—Ä—É–∑–∫–∏</label>
 <br>
 <select name="file_type">
 <option value="1">–≠—Å–∫–∏–∑</option>
 <option value="2">–ë–æ–ª—å—à–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</option>
 </select>
 <br>
 <label>–ü–æ–≤–æ—Ä–æ—Ç</label>
 <br>
 <input type="text" name="file_rotate">
 <br>
</form>
<?php

// –ü—É—Ç–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
$path = 'i/';
$tmp_path = 'tmp/';
// –ú–∞—Å—Å–∏–≤ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞
$types = array('image/gif', 'image/png', 'image/jpeg');
// –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
$size = 1024000;

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞
if ($_SERVER['REQUEST_METHOD'] == 'POST')
{
 // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∏–ø —Ñ–∞–π–ª–∞
 if (!in_array($_FILES['picture']['type'], $types))
  die('<p>–ó–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–π —Ç–∏–ø —Ñ–∞–π–ª–∞. <a href="?">–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π —Ñ–∞–π–ª?</a></p>');

 // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
 if ($_FILES['picture']['size'] > $size)
  die('<p>–°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞. <a href="?">–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π —Ñ–∞–π–ª?</a></p>');

 // –§—É–Ω–∫—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞
 // –ò–∑–º–µ–Ω—è–µ—Ç —Ä–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç type:
 // type = 1 - —ç—Å–∫–∏–∑
 //  type = 2 - –±–æ–ª—å—à–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
 // rotate - –ø–æ–≤–æ—Ä–æ—Ç –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥—Ä–∞–¥—É—Å–æ–≤ (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ 90, 180, 270)
 // quality - –∫–∞—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 75%)
 function resize($file, $type = 1, $rotate = null, $quality = null)
 {
  global $tmp_path;

  // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ —à–∏—Ä–∏–Ω–µ –≤ –ø–∏–∫—Å–µ–ª—è—Ö
  $max_thumb_size = 200;
  $max_size = 600;
 
  // –ö–∞—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  if ($quality == null)
 $quality = 75;

  // C–æ–∑–¥–∞—ë–º –∏—Å—Ö–æ–¥–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
  if ($file['type'] == 'image/jpeg')
 $source = imagecreatefromjpeg($file['tmp_name']);
  elseif ($file['type'] == 'image/png')
 $source = imagecreatefrompng($file['tmp_name']);
  elseif ($file['type'] == 'image/gif')
 $source = imagecreatefromgif($file['tmp_name']);
  else
 return false;
 
  // –ü–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
  if ($rotate != null)
 $src = imagerotate($source, $rotate, 0);
  else
 $src = $source;

  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —à–∏—Ä–∏–Ω—É –∏ –≤—ã—Å–æ—Ç—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
  $w_src = imagesx($src); 
  $h_src = imagesy($src);

  // –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ (—ç—Å–∫–∏–∑ –∏–ª–∏ –±–æ–ª—å—à–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ) —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ —à–∏—Ä–∏–Ω–µ.
  if ($type == 1)
 $w = $max_thumb_size;
  elseif ($type == 2)
 $w = $max_size;

  // –ï—Å–ª–∏ —à–∏—Ä–∏–Ω–∞ –±–æ–ª—å—à–µ –∑–∞–¥–∞–Ω–Ω–æ–π
  if ($w_src > $w)
  {
 // –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –ø—Ä–æ–ø–æ—Ä—Ü–∏–π
 $ratio = $w_src/$w;
 $w_dest = round($w_src/$ratio);
 $h_dest = round($h_src/$ratio);

 // –°–æ–∑–¥–∞—ë–º –ø—É—Å—Ç—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É
 $dest = imagecreatetruecolor($w_dest, $h_dest);
 
 // –ö–æ–ø–∏—Ä—É–µ–º —Å—Ç–∞—Ä–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –Ω–æ–≤–æ–µ —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
 imagecopyresampled($dest, $src, 0, 0, 0, 0, $w_dest, $h_dest, $w_src, $h_src);

 // –í—ã–≤–æ–¥ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –∏ –æ—á–∏—Å—Ç–∫–∞ –ø–∞–º—è—Ç–∏
 imagejpeg($dest, $tmp_path . $file['name'], $quality);
 imagedestroy($dest);
 imagedestroy($src);

 return $file['name'];
  }
  else
  {
 // –í—ã–≤–æ–¥ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –∏ –æ—á–∏—Å—Ç–∫–∞ –ø–∞–º—è—Ç–∏
 imagejpeg($src, $tmp_path . $file['name'], $quality);
 imagedestroy($src);

 return $file['name'];
  }
 }

 $name = resize($_FILES['picture'], $_POST['file_type'], $_POST['file_rotate']);

 // –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ –∏ –≤—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è
 if (!@copy($tmp_path . $name, $path . $name))
  echo '<p>–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫.</p>';
 else
  echo '<p>–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—à–ª–∞ —É–¥–∞—á–Ω–æ <a href="' . $path . $_FILES['picture']['name'] . '">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å</a>.</p>';

 // –£–¥–∞–ª—è–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
 unlink($tmp_path . $name);
}

?>

 </body>
</html>